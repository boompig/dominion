<!DOCTYPE html>
<html>
    <head>
        <title>Dominion Simulation</title>
        <meta charset="UTF-8" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha256-YLGeXaapI0/5IgZopewRJcFXomhRMlYYjugPLSyNjTY=" crossorigin="anonymous" />
        <link rel="stylesheet" href="style.css" />
    </head>

    <body>
        <div class="container container-fluid" id="app-container">
            <h1 class="title">Dominion Simulation - Round {{ game.round }}</h1>
            <div v-show="game.gameOver">
                <h4>Winners ({{ game.winArr.length}})</h4>
                <ul v-for="player in game.winArr">
                    <li>{{ player.name }}</li>
                </ul>
            </div>

            <div class="sim-container">
                <h3>Common Piles</h3>
                <div class="deck-container">
                    <div class="deck-inner-container">
                        <div v-for="cardName in standardDeckCards">
                            <div class="deck-card">{{cardName}} ({{ game.deck[cardName] }})</div>
                        </div>
                    </div>
                    <div class="deck-inner-container">
                        <div v-for="cardName in kingdomDeckCards">
                            <div class="deck-card">{{cardName}} ({{ game.deck[cardName] }})</div>
                        </div>
                    </div>
                </div>

                <div class="player-container">
                    <div class="player" v-for="player in game.players">
                        <div class="player-name">{{ player.name }}</div>
                        <div>Deck size: <span>{{ player.cards.length }}</span></div>
                        <div>Discard size: <span>{{ player.discard.length }}</span></div>
                        <div>Points: <span>{{ player.points }}</span></div>

                        <div v-for="card in player.hand"
                             v-bind:class="cardClasses(card)">
                            <div class="card-name">{{ card ? card.name : "null" }}</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="btn-container">
                <button class="btn btn-primary" type="button" v-on:click="doTurn()" :disabled="buttonDisabled">Start Game / First Turn</button>
                <button class="btn btn-primary" type="button" v-on:click="doRound()" :disabled="buttonDisabled">Run Simulation (1 Round)</button>
                <button class="btn btn-primary" type="button" v-on:click="doSim()" :disabled="buttonDisabled">Run Simulation (Full Game)</button>
                <button class="btn btn-danger" type="button" v-on:click="resetSim()" :disabled="simMode">Reset</button>
            </div>
        </div>

        <!-- Javascript at bottom for faster loading -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.10/vue.js" integrity="sha256-ufGElb3TnOtzl5E4c/qQnZFGP+FYEZj5kbSEdJNrw0A=" crossorigin="anonymous"></script>
        <script src="dominion.js" type="module" async defer></script>
    </body>
</html>
